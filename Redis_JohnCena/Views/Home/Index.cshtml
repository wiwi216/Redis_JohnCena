@model Redis_JohnCena.Models.ChartsViewModel

@{
    ViewBag.Title = "Home Page";
}

@section scripts {

@Scripts.Render("~/bundles/echarts")

<script type="text/javascript">
    function ShowCPUChart()
    {
        // 基於準備好的DOM，初始化echarts.js
        var myChart = echarts.init(document.getElementById('cpu'));

        // 設定圖表數據
        var option = {
            title: {
                text: '@Model.CPUChart.Title',
                //subtext: '纯属虚构'
            },
            tooltip: {
                trigger: 'axis'
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom: {},
                    dataView: { readOnly: false },
                    magicType: { type: ['line', 'bar'] },
                    restore: {},
                    saveAsImage: {}
                }
            },
            xAxis: {
                name: '@Model.CPUChart.XAxisName',
                data: @Html.Raw(Json.Encode(Model.CPUChart.XAxisList)),
                type: 'category',
                boundaryGap: false,
            },
            yAxis: {
                name: '@Model.CPUChart.YAxisName',
                data: @Html.Raw(Json.Encode(Model.CPUChart.YAxisList)),
                type: 'value',
                axisLabel: {
                    formatter: '{value}'
                }
            },
            series: [
				{
				    name: '使用率',
				    type: 'line',
				    data: @Html.Raw(Json.Encode(Model.CPUChart.DataList)),
				}
            ]
        };

        // 顯示圖表
        myChart.setOption(option);
    }
    ShowCPUChart();

    function ShowMemoryChart()
    {
        // 基於準備好的DOM，初始化echarts.js
        var myChart = echarts.init(document.getElementById('memory'));

        // 設定圖表數據
        var option = {
            title: {
                text: '@Model.MemoryChart.Title',
                left: '50%',
                textAlign: 'center'
            },
            tooltip: {
                trigger: 'asix',
                axisPointer: {
                    lineStyle: {
                        color: '#ddd'
                    }
                },
                backgroundColor: 'rgba(255,255,255,1)',
                padding: [5, 10],
                textStyle: {
                    color: '#7588E4',
                },
                extraCssText: 'box-shadow: 0 0 5px rgba(0,0,0,0.3)',
            },
            //legend: {
            //    right: 20,
            //    orient: 'vertical',
            //    data: ['今日', '昨日']
            //},
            xAxis: {
                name: '@Model.MemoryChart.XAxisName',
                type: 'category',
                data: @Html.Raw(Json.Encode(Model.MemoryChart.XAxisList)),
                boundaryGap: false,
                splitLine: {
                    show: true,
                    interval: 'auto',
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    textStyle: {
                        fontSize: 14
                    }
                }
            },
            yAxis: {
                name: '@Model.MemoryChart.YAxisName',
                type: 'value',
                splitLine: {
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    textStyle: {
                        fontSize: 14
                    }
                },
                data: @Html.Raw(Json.Encode(Model.MemoryChart.YAxisList)),
            },
            series: [{
                name: '數據',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 6,
                data: @Html.Raw(Json.Encode(Model.MemoryChart.DataList)),
                areaStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: 'rgba(199, 237, 250,0.5)'
                        }, {
                            offset: 1,
                            color: 'rgba(199, 237, 250,0.2)'
                        }], false)
                    }
                },
                itemStyle: {
                    normal: {
                        color: '#f7b851'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 3
                    }
                }
            }]
        };

        // 顯示圖表
        myChart.setOption(option);
    }
    ShowMemoryChart();
</script>

}

<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>

<div class="row">
    <div class="col-md-6">
        <div id="cpu" style="width: 500px; height:400px;"></div>
    </div>
    <div class="col-md-6">
        <div id="memory" style="width: 500px; height:400px;"></div>
    </div>
</div>
<div class="row">
    <div class="col-md-4">
        <h2>Cache Hit Ratio</h2>
        <img src="~/Resource/images/CPU_usage.png"  width="350" />
    </div>
    <div class="col-md-4">
        <h2>Latency</h2>
        <img src="~/Resource/images/CPU_usage.png"  width="350" />
    </div>
    <div class="col-md-4">
        <h2>Throughput</h2>
        <img src="~/Resource/images/CPU_usage.png"  width="350" />
    </div>
</div>